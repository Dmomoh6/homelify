import {toSnakeCase} from "@cld-apis/utils";
import CloudinaryApi from "./api";
export class ServerApi extends CloudinaryApi {
  config(config = {}) {
    return new ServerApi({
      ...this.configurations,
      ...config
    });
  }
  upload(file, options = {}, callback) {
    const $options = toSnakeCase(options);
    const cldServer = require("cloudinary").v2;
    cldServer.config(toSnakeCase(this.configurations));
    const uploader = cldServer.uploader;
    return uploader.upload(file, $options, callback);
  }
  async explicit(publicId, options = {}) {
    const $options = toSnakeCase(options);
    const cldServer = require("cloudinary").v2;
    cldServer.config(toSnakeCase(this.configurations));
    const uploader = cldServer.uploader;
    const asset = await uploader.explicit(publicId, $options);
    return asset;
  }
}
